
# C vs Rust vs Kotlin: ë‹¤í˜•ì„±ì˜ ì›ë¦¬

## ë‹¤í˜•ì„±ì´ë€?

"ê°™ì€ í˜¸ì¶œ ë°©ì‹ìœ¼ë¡œ ë‹¤ë¥¸ ë™ì‘ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒ"

```
speak() í˜¸ì¶œ
  â”œâ”€ Dog  â†’ "ë©ë©!"
  â”œâ”€ Cat  â†’ "ì•¼ì˜¹~"
  â””â”€ Duck â†’ "ê½¥ê½¥!"
```

íƒ€ì…ë§ˆë‹¤ ë‹¤ë¥¸ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ì–´ì•¼ í•œë‹¤. ì´ê±¸ ì–´ë–»ê²Œ êµ¬í˜„í•˜ëŠëƒê°€ í•µì‹¬ì´ë‹¤.

---

## vtableì´ë€?

**Virtual Method Table**ì˜ ì¤„ì„ë§. "í•¨ìˆ˜ ì£¼ì†Œë¥¼ ëª¨ì•„ë†“ì€ í‘œ"ë‹¤.

### ë¬¸ì œ ìƒí™©

```
Animal íƒ€ì…ì˜ ë³€ìˆ˜ aê°€ ìˆë‹¤.
a.speak()ì„ í˜¸ì¶œí–ˆë‹¤.
ê·¸ëŸ°ë° aê°€ Dogì¸ì§€ Catì¸ì§€ëŠ” ëŸ°íƒ€ì„ì—ë§Œ ì•Œ ìˆ˜ ìˆë‹¤.
â†’ ì–´ë–¤ speak()ì„ í˜¸ì¶œí•´ì•¼ í•˜ëŠ”ê°€?
```

### í•´ê²°: í•¨ìˆ˜ ì£¼ì†Œë¥¼ í‘œë¡œ ë§Œë“¤ì–´ë‘ì

```mermaid
graph LR
    subgraph vtable_dog["Dogì˜ vtable"]
        DT["[0] speak â†’ 0x1000<br/>[1] eat â†’ 0x1004"]
    end

    subgraph vtable_cat["Catì˜ vtable"]
        CT["[0] speak â†’ 0x2000<br/>[1] eat â†’ 0x2004"]
    end

    DT --> |"0x1000"| DS["dog_speak()<br/>ë©ë©!"]
    DT --> |"0x1004"| DE["dog_eat()<br/>ì‚¬ë£Œ ë¨¹ê¸°"]
    CT --> |"0x2000"| CS["cat_speak()<br/>ì•¼ì˜¹~"]
    CT --> |"0x2004"| CE["cat_eat()<br/>ìƒì„  ë¨¹ê¸°"]
```

ê° íƒ€ì…ë§ˆë‹¤ vtableì´ í•˜ë‚˜ì”© ì¡´ì¬í•œë‹¤. vtable ì•ˆì—ëŠ” í•´ë‹¹ íƒ€ì…ì˜ ë©”ì„œë“œë“¤ì˜ **ë©”ëª¨ë¦¬ ì£¼ì†Œ**ê°€ ìˆœì„œëŒ€ë¡œ ë“¤ì–´ìˆë‹¤.

### í˜¸ì¶œ ê³¼ì •

```mermaid
sequenceDiagram
    participant Code as a.speak() í˜¸ì¶œ
    participant Obj as ê°ì²´ (a)
    participant VT as vtable
    participant Fn as ì‹¤ì œ í•¨ìˆ˜

    Code->>Obj: aê°€ ëˆ„êµ¬ì•¼?
    Obj->>VT: ë‚´ vtableì€ ì—¬ê¸°ì•¼ (í¬ì¸í„°)
    VT->>Fn: speakì€ [0]ë²ˆ = 0x1000
    Fn->>Code: dog_speak() ì‹¤í–‰ â†’ "ë©ë©!"
```

1. ê°ì²´ì—ê²Œ "ë„ˆì˜ vtable ì–´ë”¨ì–´?" ë¬¼ì–´ë´„
2. vtableì—ì„œ "speakì€ ëª‡ ë²ˆì§¸?" ì°¾ìŒ
3. ê·¸ ì£¼ì†Œì— ìˆëŠ” í•¨ìˆ˜ë¥¼ ì‹¤í–‰

### ë©”ëª¨ë¦¬ ë°°ì¹˜

```
Dog ê°ì²´                          Dog vtable
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ vtable_ptr: â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ [0] speak: 0x1000    â”‚â”€â”€â†’ dog_speak()
â”‚ name: "ë°”ë‘‘ì´"    â”‚             â”‚ [1] eat:   0x1004    â”‚â”€â”€â†’ dog_eat()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cat ê°ì²´                          Cat vtable
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ vtable_ptr: â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ [0] speak: 0x2000    â”‚â”€â”€â†’ cat_speak()
â”‚ name: "ë‚˜ë¹„"      â”‚             â”‚ [1] eat:   0x2004    â”‚â”€â”€â†’ cat_eat()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

í•µì‹¬: **ê°ì²´ ì•ˆì— vtable í¬ì¸í„°ê°€ ìˆ¨ì–´ìˆë‹¤.** ì´ í¬ì¸í„°ê°€ ìê¸° íƒ€ì…ì˜ í•¨ìˆ˜ ëª©ë¡ì„ ê°€ë¦¬í‚¨ë‹¤.

### ê° ì–¸ì–´ì—ì„œ vtableì„ ëˆ„ê°€ ë§Œë“œëŠ”ê°€?

```mermaid
graph TD
    VT["vtable (í•¨ìˆ˜ ì£¼ì†Œ í‘œ)"]

    VT --> |"C"| C_who["í”„ë¡œê·¸ë˜ë¨¸ê°€ ì§ì ‘ ë§Œë“¦<br/>structì— í•¨ìˆ˜ í¬ì¸í„°ë¥¼ ë„£ëŠ” ê²Œ ê³§ vtable"]
    VT --> |"Kotlin"| VM_who["JVMì´ ìë™ ìƒì„±<br/>í´ë˜ìŠ¤ ë¡œë”© ì‹œ vtable êµ¬ì„±"]
    VT --> |"Rust (dyn)"| Rust_who["ì»´íŒŒì¼ëŸ¬ê°€ ìë™ ìƒì„±<br/>&dyn Trait ì‚¬ìš© ì‹œ vtable ìƒê¹€"]
    VT --> |"Rust (impl)"| Rust_no["vtable ì—†ìŒ!<br/>ì»´íŒŒì¼ ì‹œ í•¨ìˆ˜ ì§ì ‘ ì—°ê²°"]
```

### vtableì˜ ë¹„ìš©

vtableì„ ì‚¬ìš©í•˜ë©´ í•¨ìˆ˜ í˜¸ì¶œë§ˆë‹¤ **ê°„ì ‘ ì°¸ì¡°(indirection)**ê°€ ë°œìƒí•œë‹¤.

```
ì§ì ‘ í˜¸ì¶œ:     dog_speak()          â†’ 1ë‹¨ê³„
vtable í˜¸ì¶œ:   ê°ì²´ â†’ vtable â†’ í•¨ìˆ˜  â†’ 2ë‹¨ê³„ (í¬ì¸í„° 2ë²ˆ ë”°ë¼ê°)
```

ì´ ë¹„ìš©ì€ ì‘ì§€ë§Œ, ì´ˆë‹¹ ìˆ˜ë°±ë§Œ ë²ˆ í˜¸ì¶œë˜ëŠ” ì½”ë“œì—ì„œëŠ” ì°¨ì´ê°€ ë‚œë‹¤.
Rustê°€ `&impl Trait`(ì •ì  ë””ìŠ¤íŒ¨ì¹˜)ë¥¼ ê¸°ë³¸ìœ¼ë¡œ í•˜ëŠ” ì´ìœ ê°€ ì´ê²ƒì´ë‹¤.
vtableì´ í•„ìš” ì—†ìœ¼ë©´ ì•„ì˜ˆ ë§Œë“¤ì§€ ì•ŠëŠ”ë‹¤.

---

## Rustì—ì„œ traitì€ structê°€ ì•„ë‹ˆë‹¤

traitì€ ë°ì´í„°ê°€ ì—†ëŠ” **ê³„ì•½(ìê²©ì¦)**ì´ë‹¤. ì‹¤ì œ ë°ì´í„°ëŠ” structì— ìˆë‹¤.

```rust
trait Animal {         // ê³„ì•½ë§Œ ì •ì˜. ë°ì´í„° ì—†ìŒ.
    fn speak(&self);
}

struct Dog { name: String }  // ë°ì´í„°
struct Cat { name: String }  // ë°ì´í„°
struct Rock;                 // ë°ì´í„°

impl Animal for Dog { ... }  // Dogì— Animal ìê²© ë¶€ì—¬ â†’ vtable ìƒì„±
impl Animal for Cat { ... }  // Catì— Animal ìê²© ë¶€ì—¬ â†’ vtable ìƒì„±
// Rockì€ êµ¬í˜„ ì•ˆ í•¨          // ìê²© ì—†ìŒ â†’ vtable ì—†ìŒ â†’ &dyn Animalë¡œ ì‚¬ìš© ë¶ˆê°€
```

```mermaid
graph LR
    T["trait Animal<br/>(ê³„ì•½, ë°ì´í„° ì—†ìŒ)"]
    T --> |"impl for"| D["struct Dog âœ…<br/>vtable ìƒì„±ë¨"]
    T --> |"impl for"| C["struct Cat âœ…<br/>vtable ìƒì„±ë¨"]
    T -.- |"êµ¬í˜„ ì•ˆ í•¨"| R["struct Rock âŒ<br/>vtable ì—†ìŒ<br/>&dyn Animal ì‚¬ìš© ë¶ˆê°€"]
```

`impl Animal for X`ë¥¼ í•˜ì§€ ì•Šì€ íƒ€ì…ì€ `&dyn Animal`ë¡œ ë°›ì„ ìˆ˜ ì—†ë‹¤. ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë‚œë‹¤.
ì´ê²ƒì´ Rustì˜ ì•ˆì „ì„±: **vtableì— ë“±ë¡ë˜ì§€ ì•Šì€ íƒ€ì…ì€ ëŸ°íƒ€ì„ì— ë„ë‹¬í•  ìˆ˜ ì—†ë‹¤.**

---

## traitì˜ 3ê°€ì§€ ì—­í• 

traitì€ ë‹¤í˜•ì„±ë§Œì„ ìœ„í•œ ê²ƒì´ ì•„ë‹ˆë‹¤. í•˜ë‚˜ì˜ ë„êµ¬ë¡œ 3ê°€ì§€ ì—­í• ì„ í•œë‹¤.

```mermaid
graph TD
    Trait["trait"] --> Role1["1. ë‹¤í˜•ì„±<br/>ì—¬ëŸ¬ íƒ€ì…ì„ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë‹¤ë£¨ê¸°"]
    Trait --> Role2["2. ì œë„¤ë¦­ ì œì•½<br/>í•¨ìˆ˜ì— ì•„ë¬´ íƒ€ì…ì´ë‚˜ ë„£ì§€ ëª»í•˜ê²Œ ì œí•œ"]
    Trait --> Role3["3. ê¸°ëŠ¥ ë¶€ì—¬<br/>ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íƒ€ì…ì— ë©”ì„œë“œ ì¶”ê°€"]

    Role1 --> Ex1["&dyn Animal, Box&lt;dyn Animal&gt;"]
    Role2 --> Ex2["fn foo&lt;P: Pattern&gt;(pat: P)<br/>â†’ Pattern êµ¬í˜„í•œ íƒ€ì…ë§Œ ë°›ìŒ"]
    Role3 --> Ex3["impl FromStr for u32<br/>â†’ u32ê°€ .parse() ê°€ëŠ¥í•´ì§"]
```

ë‹¤ë¥¸ ì–¸ì–´ì—ì„œëŠ” interface, ì œë„¤ë¦­ ì œì•½, í™•ì¥ í•¨ìˆ˜ê°€ ë³„ê°œì¸ë°, RustëŠ” trait í•˜ë‚˜ë¡œ ì „ë¶€ ì²˜ë¦¬í•œë‹¤.

---

## `&impl Trait` vs `&dyn Trait`

ë‘˜ ë‹¤ "traitì„ êµ¬í˜„í•œ íƒ€ì…ì„ ë°›ê² ë‹¤"ì´ì§€ë§Œ, **íƒ€ì…ì„ ì–¸ì œ ê²°ì •í•˜ëŠëƒ**ê°€ ë‹¤ë¥´ë‹¤.

### `&impl Trait` â€” ì»´íŒŒì¼ íƒ€ì„ì— ê²°ì • (ì •ì  ë””ìŠ¤íŒ¨ì¹˜)

```rust
fn interact(a: &impl Animal) {
    a.speak();
}

interact(&dog);  // ì»´íŒŒì¼ëŸ¬ê°€ Dog ì „ìš© í•¨ìˆ˜ ìƒì„±
interact(&cat);  // ì»´íŒŒì¼ëŸ¬ê°€ Cat ì „ìš© í•¨ìˆ˜ ìƒì„±
```

```
ì»´íŒŒì¼ í›„:
interact_dog(a: &Dog) { ... }  â† Dog ì „ìš©, dog_speak() ì§ì ‘ í˜¸ì¶œ
interact_cat(a: &Cat) { ... }  â† Cat ì „ìš©, cat_speak() ì§ì ‘ í˜¸ì¶œ

â†’ vtable ì—†ìŒ. ë¹„ìš© 0. ëŒ€ì‹  ë°”ì´ë„ˆë¦¬ í¬ê¸° ì»¤ì§.
```

### `&dyn Trait` â€” ëŸ°íƒ€ì„ì— ê²°ì • (ë™ì  ë””ìŠ¤íŒ¨ì¹˜)

```rust
fn interact(a: &dyn Animal) {
    a.speak();
}

interact(&dog);  // ëŸ°íƒ€ì„ì— Dog vtable ì¡°íšŒ
interact(&cat);  // ëŸ°íƒ€ì„ì— Cat vtable ì¡°íšŒ
```

```
ì»´íŒŒì¼ í›„:
interact(a: &dyn Animal) { ... }  â† í•¨ìˆ˜ 1ê°œ, vtable ì¡°íšŒ ì½”ë“œ í¬í•¨

â†’ vtable ì¡°íšŒ ë¹„ìš© ìˆìŒ. ëŒ€ì‹  ë°”ì´ë„ˆë¦¬ ì‘ìŒ.
```

### `&dyn`ë§Œ ê°€ëŠ¥í•œ ê²ƒ: ì„œë¡œ ë‹¤ë¥¸ íƒ€ì…ì„ í•œ ì»¬ë ‰ì…˜ì— ë‹´ê¸°

```rust
// &implì€ ë¶ˆê°€ëŠ¥ - Dogê³¼ Catì€ ë‹¤ë¥¸ íƒ€ì…
let animals: Vec<&impl Animal> = vec![&dog, &cat];  // âŒ ì»´íŒŒì¼ ì—ëŸ¬

// &dynì€ ê°€ëŠ¥ - vtableì„ í†µí•´ ëŸ°íƒ€ì„ì— êµ¬ë¶„
let animals: Vec<&dyn Animal> = vec![&dog, &cat];   // âœ…
for a in &animals {
    a.speak();  // ê°ê°ì˜ vtableì„ ë”°ë¼ê°
}
```

### ë¹„êµ

| | `&impl Trait` | `&dyn Trait` |
|---|---|---|
| íƒ€ì… ê²°ì • | ì»´íŒŒì¼ íƒ€ì„ | ëŸ°íƒ€ì„ |
| vtable | ì—†ìŒ | ìˆìŒ |
| ì„±ëŠ¥ | ë¹ ë¦„ (ì§ì ‘ í˜¸ì¶œ) | ì•½ê°„ ëŠë¦¼ (ê°„ì ‘ í˜¸ì¶œ) |
| ì—¬ëŸ¬ íƒ€ì… ì„ê¸° | ë¶ˆê°€ëŠ¥ | ê°€ëŠ¥ |
| ë°”ì´ë„ˆë¦¬ í¬ê¸° | ì»¤ì§ (íƒ€ì…ë³„ í•¨ìˆ˜ ë³µì‚¬) | ì‘ìŒ (í•¨ìˆ˜ í•˜ë‚˜) |

---

## Rust traitì˜ 3ê°€ì§€ ì¥ì  ìš”ì•½

```mermaid
graph TD
    T["Rustì˜ Trait ì‹œìŠ¤í…œ"]
    T --> A1["1. ì¸ì§€ì  ëª…í™•ì„±<br/>trait = ê³„ì•½, struct = ë°ì´í„°<br/>ì—­í• ì´ ë¶„ë¦¬ë˜ì–´ ì´í•´í•˜ê¸° ì‰¬ì›€"]
    T --> A2["2. ì»´íŒŒì¼ íƒ€ì„ ì•ˆì „ì„±<br/>impl í•˜ì§€ ì•Šì€ íƒ€ì…ì€ &dynìœ¼ë¡œ ì‚¬ìš© ë¶ˆê°€<br/>vtableì— ë¹ ì§„ í•¨ìˆ˜ë„ ì»´íŒŒì¼ ì—ëŸ¬"]
    T --> A3["3. ë¹„ìš© ì„ íƒ ê°€ëŠ¥<br/>&impl â†’ vtable ì—†ìŒ, ë¹„ìš© 0<br/>&dyn â†’ vtable ì‚¬ìš©, í•„ìš”í•  ë•Œë§Œ"]
```

---

## ì „ì²´ êµ¬ì¡° ë¹„êµ

```mermaid
graph TB
    subgraph problem["ë¬¸ì œ: ë‹¤í˜•ì„±"]
        Q["speak()ì„ í˜¸ì¶œí–ˆì„ ë•Œ<br/>Dogì€ ë©ë©, Catì€ ì•¼ì˜¹<br/>ì–´ë–»ê²Œ?"]
    end

    Q --> C
    Q --> Rust
    Q --> Kotlin_sub

    subgraph C["C - í•¨ìˆ˜ í¬ì¸í„°"]
        C1["structì— í•¨ìˆ˜ í¬ì¸í„° ì§ì ‘ ì €ì¥"]
        C2["í”„ë¡œê·¸ë˜ë¨¸ê°€ ìˆ˜ë™ìœ¼ë¡œ vtable êµ¬ì„±"]
        C3["ê²€ì¦ ì—†ìŒ - ëŸ°íƒ€ì„ì— í„°ì§"]
        C1 --> C2 --> C3
    end

    subgraph Rust["Rust - Trait"]
        R1["traitìœ¼ë¡œ ê³„ì•½ ì •ì˜"]
        R2["implë¡œ íƒ€ì…ë³„ êµ¬í˜„"]
        R3["ì»´íŒŒì¼ëŸ¬ê°€ ê²€ì¦ + ì •ì /ë™ì  ì„ íƒ"]
        R1 --> R2 --> R3
    end

    subgraph Kotlin_sub["Kotlin - Interface + ìƒì†"]
        K1["interface/abstract classë¡œ ê³„ì•½ ì •ì˜"]
        K2["classì—ì„œ ìƒì†/êµ¬í˜„"]
        K3["VMì´ vtable ê´€ë¦¬ - í•­ìƒ ëŸ°íƒ€ì„"]
        K1 --> K2 --> K3
    end
```

---

## ê° ì–¸ì–´ì˜ êµ¬í˜„ ë°©ì‹

### C - í•¨ìˆ˜ í¬ì¸í„° (ìˆ˜ë™)

```c
// í•¨ìˆ˜ í¬ì¸í„° í…Œì´ë¸” = ìˆ˜ë™ vtable
typedef struct {
    const char* name;
    void (*speak)(void);
    void (*eat)(void);
} Animal;

void dog_speak() { printf("ë©ë©!\n"); }
void dog_eat()   { printf("ì‚¬ë£Œ ë¨¹ê¸°\n"); }

Animal dog = { "ê°•ì•„ì§€", dog_speak, dog_eat };
dog.speak();  // í•¨ìˆ˜ í¬ì¸í„°ë¥¼ í†µí•´ í˜¸ì¶œ
```

### Rust - Trait (ì»´íŒŒì¼ëŸ¬ê°€ ê´€ë¦¬)

```rust
trait Animal {
    fn speak(&self);
    fn eat(&self);
}

struct Dog { name: String }

impl Animal for Dog {
    fn speak(&self) { println!("ë©ë©!"); }
    fn eat(&self)   { println!("ì‚¬ë£Œ ë¨¹ê¸°"); }
}
```

### Kotlin - Interface

```kotlin
interface Animal {
    fun speak()
    fun eat()
}

class Dog(val name: String) : Animal {
    override fun speak() = println("ë©ë©!")
    override fun eat()   = println("ì‚¬ë£Œ ë¨¹ê¸°")
}
```

---

## ë©”ëª¨ë¦¬ì—ì„œ ì‹¤ì œë¡œ ì¼ì–´ë‚˜ëŠ” ì¼

```mermaid
graph LR
    subgraph C_mem["C - ë©”ëª¨ë¦¬"]
        CS["Dog struct"]
        CS --> |"speak: 0x1000"| CF1["dog_speak()"]
        CS --> |"eat: 0x1004"| CF2["dog_eat()"]
    end

    subgraph Rust_static["Rust ì •ì  ë””ìŠ¤íŒ¨ì¹˜ - ë©”ëª¨ë¦¬"]
        RS["Dog struct"]
        RS --> |"ì»´íŒŒì¼ ì‹œ ì§ì ‘ ì—°ê²°"| RF1["dog_speak() ì§ì ‘ í˜¸ì¶œ"]
    end

    subgraph Rust_dynamic["Rust ë™ì  ë””ìŠ¤íŒ¨ì¹˜ - ë©”ëª¨ë¦¬"]
        RD["Dog ì°¸ì¡°"]
        RD --> |"vtable í¬ì¸í„°"| RV["vtable"]
        RV --> RDF1["dog_speak()"]
        RV --> RDF2["dog_eat()"]
    end

    subgraph Kotlin_mem["Kotlin - ë©”ëª¨ë¦¬"]
        KS["Dog ê°ì²´"]
        KS --> |"í´ë˜ìŠ¤ ë©”íƒ€ë°ì´í„°"| KV["vtable (JVM ê´€ë¦¬)"]
        KV --> KF1["dog_speak()"]
        KV --> KF2["dog_eat()"]
    end
```

---

## ë””ìŠ¤íŒ¨ì¹˜ ë°©ì‹ ë¹„êµ

```mermaid
graph TD
    Call["animal.speak() í˜¸ì¶œ"] --> How{"ì–´ë–»ê²Œ í•¨ìˆ˜ë¥¼ ì°¾ëŠ”ê°€?"}

    How --> |"C"| C_way["í•¨ìˆ˜ í¬ì¸í„° ì£¼ì†Œë¥¼ ì½ì–´ì„œ<br/>í•´ë‹¹ ì£¼ì†Œë¡œ ì í”„<br/>(í•­ìƒ ëŸ°íƒ€ì„)"]

    How --> |"Rust (ê¸°ë³¸)"| Rust_static["ì»´íŒŒì¼ íƒ€ì„ì— íƒ€ì… í™•ì •<br/>â†’ í•¨ìˆ˜ ì§ì ‘ í˜¸ì¶œ ì½”ë“œ ìƒì„±<br/>(ë¹„ìš© 0, monomorphization)"]

    How --> |"Rust (dyn)"| Rust_dynamic["vtableì—ì„œ í•¨ìˆ˜ ì£¼ì†Œ ì¡°íšŒ<br/>â†’ í•´ë‹¹ ì£¼ì†Œë¡œ ì í”„<br/>(ëŸ°íƒ€ì„, Cì™€ ë™ì¼)"]

    How --> |"Kotlin"| VM_way["JVMì´ ê°ì²´ì˜ í´ë˜ìŠ¤ ë©”íƒ€ë°ì´í„°ì—ì„œ<br/>vtable ì¡°íšŒ â†’ í•¨ìˆ˜ í˜¸ì¶œ<br/>(í•­ìƒ ëŸ°íƒ€ì„)"]

    C_way --> Runtime["ëŸ°íƒ€ì„ ë¹„ìš© ìˆìŒ"]
    Rust_dynamic --> Runtime
    VM_way --> Runtime
    Rust_static --> Zero["ëŸ°íƒ€ì„ ë¹„ìš© ì—†ìŒ"]
```

---

## Rustì˜ ì •ì  vs ë™ì  ë””ìŠ¤íŒ¨ì¹˜

```mermaid
graph TD
    Q{"ë‹¤í˜•ì„±ì´ í•„ìš”í•œê°€?"} --> |"YES"| B{"ì»´íŒŒì¼ íƒ€ì„ì—<br/>íƒ€ì…ì„ ì•Œ ìˆ˜ ìˆë‚˜?"}
    Q --> |"NO"| A["struct + impl ë§Œìœ¼ë¡œ ì¶©ë¶„"]

    B --> |"YES"| Static["&impl Trait (ì •ì  ë””ìŠ¤íŒ¨ì¹˜)<br/>ì»´íŒŒì¼ëŸ¬ê°€ íƒ€ì…ë³„ í•¨ìˆ˜ë¥¼ ê°ê° ìƒì„±<br/>ë¹„ìš© 0"]
    B --> |"NO"| Dynamic["&dyn Trait (ë™ì  ë””ìŠ¤íŒ¨ì¹˜)<br/>ëŸ°íƒ€ì„ì— vtable ì¡°íšŒ<br/>C/Kotlinê³¼ ë™ì¼í•œ ë¹„ìš©"]

    Static --> Ex1["ì˜ˆ: ì œë„¤ë¦­ í•¨ìˆ˜<br/>fn notify(item: &impl Summary)"]
    Dynamic --> Ex2["ì˜ˆ: ì—¬ëŸ¬ íƒ€ì…ì„ í•œ ì»¬ë ‰ì…˜ì— ë‹´ê¸°<br/>Vec&lt;Box&lt;dyn Animal&gt;&gt;"]
```

---

## ì•ˆì „ì„± ë¹„êµ

```mermaid
graph TD
    subgraph C_safe["C"]
        C_Q{"í•¨ìˆ˜ í¬ì¸í„°ì—<br/>ì—‰ëš±í•œ í•¨ìˆ˜ ë„£ìœ¼ë©´?"}
        C_Q --> C_A["ì»´íŒŒì¼ ë¨ âœ…"]
        C_A --> C_B["ëŸ°íƒ€ì„ì— í„°ì§ ğŸ’¥"]
    end

    subgraph Rust_safe["Rust"]
        R_Q{"trait ë©”ì„œë“œë¥¼<br/>ë¹¼ë¨¹ìœ¼ë©´?"}
        R_Q --> R_A["ì»´íŒŒì¼ ì—ëŸ¬ âŒ"]
        R_A --> R_B["ì‹¤í–‰ ìì²´ê°€ ì•ˆ ë¨<br/>â†’ ì•ˆì „"]
    end

    subgraph Kotlin_safe["Kotlin"]
        K_Q{"interface ë©”ì„œë“œë¥¼<br/>ë¹¼ë¨¹ìœ¼ë©´?"}
        K_Q --> K_A["ì»´íŒŒì¼ ì—ëŸ¬ âŒ"]
        K_A --> K_B["ì‹¤í–‰ ìì²´ê°€ ì•ˆ ë¨<br/>â†’ ì•ˆì „"]
    end
```

---

## ìƒì† vs í•©ì„±

```mermaid
graph TD
    subgraph Kotlin_inherit["Kotlin - ìƒì† ê¸°ë°˜"]
        KA["open class Animal"] --> |"extends"| KD["class Dog : Animal"]
        KA --> |"extends"| KC["class Cat : Animal"]
        KI["interface Speakable"] --> |"implements"| KD
        KI --> |"implements"| KC
        KNote["ë°ì´í„° + í–‰ë™ì´ í´ë˜ìŠ¤ ì•ˆì— ë¬¶ì„<br/>ë¶€ëª¨ì˜ êµ¬í˜„ì„ ë¬¼ë ¤ë°›ìŒ<br/>ë‹¤ì´ì•„ëª¬ë“œ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥"]
    end

    subgraph Rust_compose["Rust - í•©ì„± ê¸°ë°˜"]
        RS1["struct Dog (ë°ì´í„°ë§Œ)"]
        RS2["struct Cat (ë°ì´í„°ë§Œ)"]
        RT1["trait Animal (í–‰ë™ ê³„ì•½)"]
        RT2["trait Pet (í–‰ë™ ê³„ì•½)"]
        RT1 --> |"impl for"| RS1
        RT1 --> |"impl for"| RS2
        RT2 --> |"impl for"| RS1
        RT2 --> |"impl for"| RS2
        RNote["ë°ì´í„°ì™€ í–‰ë™ì´ ë¶„ë¦¬ë¨<br/>ìƒì† ì—†ìŒ, traitì„ ììœ ë¡­ê²Œ ì¡°í•©<br/>ë‹¤ì´ì•„ëª¬ë“œ ë¬¸ì œ ì—†ìŒ"]
    end
```

---

## ìµœì¢… ë¹„êµí‘œ

| | C | Rust | Kotlin |
|---|---|---|---|
| **ë‹¤í˜•ì„± ë„êµ¬** | í•¨ìˆ˜ í¬ì¸í„° | trait | interface + ìƒì† |
| **vtable ê´€ë¦¬** | í”„ë¡œê·¸ë˜ë¨¸ | ì»´íŒŒì¼ëŸ¬ | JVM |
| **ì»´íŒŒì¼ íƒ€ì„ ê²€ì¦** | ì—†ìŒ | ìˆìŒ | ìˆìŒ |
| **ì •ì  ë””ìŠ¤íŒ¨ì¹˜** | ìˆ˜ë™ìœ¼ë¡œ ê°€ëŠ¥ | `&impl Trait` | ì—†ìŒ (JITê°€ ìµœì í™”) |
| **ë™ì  ë””ìŠ¤íŒ¨ì¹˜** | í•­ìƒ | `&dyn Trait` | í•­ìƒ |
| **ìƒì†** | ì—†ìŒ | ì—†ìŒ | ìˆìŒ |
| **ëŸ°íƒ€ì„ ë¹„ìš©** | í•¨ìˆ˜ í¬ì¸í„° ì¡°íšŒ | ì„ íƒ ê°€ëŠ¥ (0 ë˜ëŠ” ì¡°íšŒ) | JVM ì˜¤ë²„í—¤ë“œ |
| **ë©”ëª¨ë¦¬ ê´€ë¦¬** | ìˆ˜ë™ (malloc/free) | ì†Œìœ ê¶Œ ì‹œìŠ¤í…œ (ìë™) | GC |

---

## í•œ ì¤„ ìš”ì•½

> **ë°‘ë°”ë‹¥ì€ ì „ë¶€ vtable(í•¨ìˆ˜ í¬ì¸í„° í…Œì´ë¸”)ì´ë‹¤.**
>
> - **C**: ì§ì ‘ ë§Œë“¤ê³  ì§ì ‘ ê´€ë¦¬. ë¹ ë¥´ì§€ë§Œ ìœ„í—˜.
> - **Kotlin**: JVMì´ ë§Œë“¤ê³  JVMì´ ê´€ë¦¬. ì•ˆì „í•˜ì§€ë§Œ í•­ìƒ ëŸ°íƒ€ì„ ë¹„ìš©.
> - **Rust**: ì»´íŒŒì¼ëŸ¬ê°€ ë§Œë“¤ê³  ê²€ì¦. ì•ˆì „í•˜ë©´ì„œ ë¹„ìš©ë„ ì„ íƒ ê°€ëŠ¥ (ì •ì ì´ë©´ 0).
